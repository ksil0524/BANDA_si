ALTER TABLE LIKES
	DROP
		CONSTRAINT FK_FEED_TO_LIKES
		CASCADE;

ALTER TABLE LIKES
	DROP
		CONSTRAINT FK_ACCOUNT_TO_LIKES
		CASCADE;

ALTER TABLE FOLLOW
	DROP
		CONSTRAINT FK_ACCOUNT_TO_FOLLOW2
		CASCADE;

ALTER TABLE FOLLOW
	DROP
		CONSTRAINT FK_ACCOUNT_TO_FOLLOW
		CASCADE;

ALTER TABLE BOARD
	DROP
		CONSTRAINT FK_ACCOUNT_TO_BOARD
		CASCADE;

ALTER TABLE COMMENTS
	DROP
		CONSTRAINT FK_ACCOUNT_TO_COMMENTS
		CASCADE;

ALTER TABLE CHAT
	DROP
		CONSTRAINT FK_ACCOUNT_TO_CHAT
		CASCADE;

ALTER TABLE CHAT
	DROP
		CONSTRAINT FK_ACCOUNT_TO_CHAT2
		CASCADE;

ALTER TABLE PET
	DROP
		CONSTRAINT FK_ACCOUNT_TO_PET
		CASCADE;

ALTER TABLE PET
	DROP
		CONSTRAINT FK_CATE_P_SPECIES_TO_PET
		CASCADE;

ALTER TABLE CATE_P_SPECIES
	DROP
		CONSTRAINT FK_CT_P_CLASS_TO_CT_P_SPCS
		CASCADE;

ALTER TABLE FEED
	DROP
		CONSTRAINT FK_ACCOUNT_TO_FEED
		CASCADE;

ALTER TABLE BOARD
	DROP
		CONSTRAINT CK_BOARD_CATE
		CASCADE;

ALTER TABLE BOARD
	DROP
		CONSTRAINT CK_BOARD_NYN
		CASCADE;

ALTER TABLE COMMENTS
	DROP
		CONSTRAINT CK_COMMENT_CATE
		CASCADE;

ALTER TABLE CHAT
	DROP
		CONSTRAINT CK_CHAT_FYN
		CASCADE;

ALTER TABLE ACCOUNT
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE LIKES
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE CATE_P_CLASS
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE BOARD
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE COMMENTS
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE CHAT
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE PET
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE CATE_P_SPECIES
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE FEED
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;


/* 지도관련 */
DROP TABLE MAPS 
	CASCADE CONSTRAINTS;

/* 계정 */
DROP TABLE ACCOUNT 
	CASCADE CONSTRAINTS;

/* 좋아요 */
DROP TABLE LIKES 
	CASCADE CONSTRAINTS;

/* 팔로우 */
DROP TABLE FOLLOW 
	CASCADE CONSTRAINTS;

/* 동물카테고리(대분류) */
DROP TABLE CATE_P_CLASS 
	CASCADE CONSTRAINTS;

/* 게시판 */
DROP TABLE BOARD 
	CASCADE CONSTRAINTS;

/* 댓글 */
DROP TABLE COMMENTS 
	CASCADE CONSTRAINTS;

/* 채팅 */
DROP TABLE CHAT 
	CASCADE CONSTRAINTS;

/* 반려동물 */
DROP TABLE PET 
	CASCADE CONSTRAINTS;

/* 동물카테고리(소분류) */
DROP TABLE CATE_P_SPECIES 
	CASCADE CONSTRAINTS;

/* 피드 */
DROP TABLE FEED 
	CASCADE CONSTRAINTS;

/* 지도SEQ */
DROP SEQUENCE MAP_SEQ;

/* 대분류SEQ */
DROP SEQUENCE CLASS_SEQ;

/* 소분류SEQ */
DROP SEQUENCE SPECIES_SEQ;

/* 반려동물SEQ */
DROP SEQUENCE PET_SEQ;

/* 피드SEQ */
DROP SEQUENCE FEED_SEQ;

/* 게시판SEQ */
DROP SEQUENCE BOARD_SEQ;

/* 댓글SEQ */
DROP SEQUENCE COM_SEQ;

/* 채팅SEQ */
DROP SEQUENCE CHAT_SEQ;


/* 지도SEQ */
CREATE SEQUENCE MAP_SEQ 
	INCREMENT BY 1
	START WITH 20000
	NOCACHE;

/* 대분류SEQ */
CREATE SEQUENCE CLASS_SEQ 
	INCREMENT BY 1
	START WITH 100
    NOCACHE;

/* 소분류SEQ */
CREATE SEQUENCE SPECIES_SEQ 
	INCREMENT BY 1
	START WITH 100;

/* 반려동물SEQ */
CREATE SEQUENCE PET_SEQ 
	INCREMENT BY 1
	START WITH 100
    NOCACHE;

/* 피드SEQ */
CREATE SEQUENCE FEED_SEQ 
	INCREMENT BY 1
	START WITH 500
    NOCACHE;

/* 게시판SEQ */
CREATE SEQUENCE BOARD_SEQ 
	INCREMENT BY 1
	START WITH 500
    NOCACHE;

/* 댓글SEQ */
CREATE SEQUENCE COM_SEQ 
	INCREMENT BY 1
	START WITH 500
    NOCACHE;

/* 채팅SEQ */
CREATE SEQUENCE CHAT_SEQ 
	INCREMENT BY 1
	START WITH 500
    NOCACHE;

/* 지도관련 */
CREATE TABLE MAPS (
	MAP_NO NUMBER NOT NULL, /* 지도SEQ */
	MAP_CATE VARCHAR2(10) NOT NULL, /* 구분 */
	MAP_NAME VARCHAR2(500) NOT NULL, /* 상호명 */
	MAP_ADDR VARCHAR2(500) NOT NULL, /* 지번주소 */
	MAP_NADDR VARCHAR2(500) NOT NULL, /* 도로명주소 */
	MAP_ZIPCODE VARCHAR2(5) NOT NULL, /* 우편번호 */
	MAP_PHONE VARCHAR2(13) NOT NULL, /* 전화번호 */
	MAP_LATITUDE NUMBER NOT NULL, /* 위도 */
	MAP_LONGITUDE NUMBER NOT NULL /* 경도 */
);

ALTER TABLE MAPS
	ADD
		CONSTRAINT PK_MAPS
		PRIMARY KEY (
			MAP_NO
		);

/* 계정 */
CREATE TABLE ACCOUNT (
	ID VARCHAR2(100) NOT NULL, /* 아이디 */
	PASSWORD VARCHAR2(100) NOT NULL, /* 비밀번호 */
	EMAIL VARCHAR2(100) NOT NULL, /* 이메일 */
	PHONE VARCHAR2(13) NOT NULL /* 전화번호 */
);

ALTER TABLE ACCOUNT
	ADD
		CONSTRAINT PK_ACCOUNT
		PRIMARY KEY (
			ID
		);

/* 좋아요 */
CREATE TABLE LIKES (
	FEED_NO NUMBER NOT NULL, /* 피드번호SEQ */
	ID VARCHAR2(100) NOT NULL /* 아이디 */
);

ALTER TABLE LIKES
	ADD
		CONSTRAINT PK_LIKES
		PRIMARY KEY (
			FEED_NO,
			ID
		);

/* 팔로우 */
CREATE TABLE FOLLOW (
	FR_ID VARCHAR2(100) NOT NULL, /* 팔로우한사람 */
	FD_ID VARCHAR2(100) NOT NULL /* 팔로우당한사람 */
);

/* 동물카테고리(대분류) */
CREATE TABLE CATE_P_CLASS (
	CLASS_NO NUMBER NOT NULL, /* 대분류SEQ */
	CLASS_NAME VARCHAR2(100) NOT NULL /* 대분류이름 */
);

ALTER TABLE CATE_P_CLASS
	ADD
		CONSTRAINT PK_CATE_P_CLASS
		PRIMARY KEY (
			CLASS_NO
		);

/* 게시판 */
CREATE TABLE BOARD (
	BOARD_NO NUMBER NOT NULL, /* 게시판번호SEQ */
	BOARD_CATE VARCHAR2(2) NOT NULL, /* 구분(물교OR나눔-CK) */
	ID VARCHAR2(100) NOT NULL, /* 아이디 */
	BOARD_TITLE VARCHAR2(200) NOT NULL, /* 제목 */
	BOARD_CONTENT VARCHAR2(4000) NOT NULL, /* 내용 */
	BOARD_REGDATE DATE NOT NULL, /* 작성일 */
	BOARD_NYN VARCHAR2(1) NOT NULL, /* 공지여부(Y_N) */
	BOARD_FILE VARCHAR2(1000) NOT NULL, /* 첨부파일 */
	BOARD_HASH VARCHAR2(3000) /* 해시태그 */
);

ALTER TABLE BOARD
	ADD
		CONSTRAINT PK_BOARD
		PRIMARY KEY (
			BOARD_NO
		);

ALTER TABLE BOARD
	ADD
		CONSTRAINT CK_BOARD_CATE
		CHECK (BOARD_CATE IN('EX','SH'));

ALTER TABLE BOARD
	ADD
		CONSTRAINT CK_BOARD_NYN
		CHECK (BOARD_NYN IN('Y','N'));

/* 댓글 */
CREATE TABLE COMMENTS (
	COM_NO NUMBER NOT NULL, /* 댓글번호SEQ */
	COM_CATE VARCHAR2(1) NOT NULL, /* 구분(게시판OR피드OR댓글-CK) */
	ID VARCHAR2(100) NOT NULL, /* 아이디 */
	COM_CONTENT VARCHAR2(4000) NOT NULL, /* 내용 */
	COM_REGDATE DATE NOT NULL, /* 작성일 */
	COM_PNO NUMBER NOT NULL /* 부모글번호 */
);

ALTER TABLE COMMENTS
	ADD
		CONSTRAINT PK_COMMENTS
		PRIMARY KEY (
			COM_NO
		);

ALTER TABLE COMMENTS
	ADD
		CONSTRAINT CK_COMMENT_CATE
		CHECK (COM_CATE IN('F','B','C'));

/* 채팅 */
CREATE TABLE CHAT (
	CHAT_NO NUMBER NOT NULL, /* 채팅번호SEQ */
	S_ID VARCHAR2(100) NOT NULL, /* 보낸사람 */
	G_ID VARCHAR2(100) NOT NULL, /* 받는사람 */
	CHAT_CONTENT VARCHAR2(4000) NOT NULL, /* 내용 */
	CHAT_FYN VARCHAR2(1) NOT NULL, /* 파일여부 */
	CHAT_REGDATE DATE NOT NULL /* 보낸시간 */
);

ALTER TABLE CHAT
	ADD
		CONSTRAINT PK_CHAT
		PRIMARY KEY (
			CHAT_NO
		);

ALTER TABLE CHAT
	ADD
		CONSTRAINT CK_CHAT_FYN
		CHECK (CHAT_FYN IN('Y','N'));

/* 반려동물 */
CREATE TABLE PET (
	P_NO NUMBER NOT NULL, /* 반려동물번호SEQ */
	CLASS_NO NUMBER NOT NULL, /* 대분류SEQ */
	SPECIES_NO NUMBER NOT NULL, /* 소분류SEQ */
	ID VARCHAR2(100) NOT NULL, /* 아이디 */
	P_NAME VARCHAR2(100) NOT NULL, /* 이름 */
	P_KIND VARCHAR2(100) NOT NULL, /* 품종 */
	P_BIRTH DATE NOT NULL, /* 출생일 */
	P_CHARACTER VARCHAR2(100) NOT NULL, /* 성격 */
	P_LIKE VARCHAR2(100), /* 좋아하는것 */
	P_HATE VARCHAR2(100), /* 싫어하는것 */
	P_ABOUT VARCHAR2(4000) NOT NULL /* 소개 */
);

ALTER TABLE PET
	ADD
		CONSTRAINT PK_PET
		PRIMARY KEY (
			P_NO
		);

/* 동물카테고리(소분류) */
CREATE TABLE CATE_P_SPECIES (
	CLASS_NO NUMBER NOT NULL, /* 대분류SEQ */
	SPECIES_NO NUMBER NOT NULL, /* 소분류SEQ */
	SPECIES_NAME VARCHAR2(100) NOT NULL /* 소분류이름 */
);

ALTER TABLE CATE_P_SPECIES
	ADD
		CONSTRAINT PK_CATE_P_SPECIES
		PRIMARY KEY (
			CLASS_NO,
			SPECIES_NO
		);

/* 피드 */
CREATE TABLE FEED (
	FEED_NO NUMBER NOT NULL, /* 피드번호SEQ */
	ID VARCHAR2(100) NOT NULL, /* 아이디 */
	FEED_CONTENT VARCHAR2(4000) NOT NULL, /* 내용 */
	FEED_PTAG VARCHAR2(4000), /* 반려동물태그 */
	FEED_HTAG VARCHAR2(4000), /* 해시태그 */
	FEED_REGDATE DATE NOT NULL, /* 작성일 */
	FEED_FILE VARCHAR2(1000) NOT NULL /* 첨부파일 */
);

ALTER TABLE FEED
	ADD
		CONSTRAINT PK_FEED
		PRIMARY KEY (
			FEED_NO
		);

ALTER TABLE LIKES
	ADD
		CONSTRAINT FK_FEED_TO_LIKES
		FOREIGN KEY (
			FEED_NO
		)
		REFERENCES FEED (
			FEED_NO
		);

ALTER TABLE LIKES
	ADD
		CONSTRAINT FK_ACCOUNT_TO_LIKES
		FOREIGN KEY (
			ID
		)
		REFERENCES ACCOUNT (
			ID
		);

ALTER TABLE FOLLOW
	ADD
		CONSTRAINT FK_ACCOUNT_TO_FOLLOW2
		FOREIGN KEY (
			FD_ID
		)
		REFERENCES ACCOUNT (
			ID
		);

ALTER TABLE FOLLOW
	ADD
		CONSTRAINT FK_ACCOUNT_TO_FOLLOW
		FOREIGN KEY (
			FR_ID
		)
		REFERENCES ACCOUNT (
			ID
		);

ALTER TABLE BOARD
	ADD
		CONSTRAINT FK_ACCOUNT_TO_BOARD
		FOREIGN KEY (
			ID
		)
		REFERENCES ACCOUNT (
			ID
		);

ALTER TABLE COMMENTS
	ADD
		CONSTRAINT FK_ACCOUNT_TO_COMMENTS
		FOREIGN KEY (
			ID
		)
		REFERENCES ACCOUNT (
			ID
		);

ALTER TABLE CHAT
	ADD
		CONSTRAINT FK_ACCOUNT_TO_CHAT
		FOREIGN KEY (
			S_ID
		)
		REFERENCES ACCOUNT (
			ID
		);

ALTER TABLE CHAT
	ADD
		CONSTRAINT FK_ACCOUNT_TO_CHAT2
		FOREIGN KEY (
			G_ID
		)
		REFERENCES ACCOUNT (
			ID
		);

ALTER TABLE PET
	ADD
		CONSTRAINT FK_ACCOUNT_TO_PET
		FOREIGN KEY (
			ID
		)
		REFERENCES ACCOUNT (
			ID
		);

ALTER TABLE PET
	ADD
		CONSTRAINT FK_CATE_P_SPECIES_TO_PET
		FOREIGN KEY (
			CLASS_NO,
			SPECIES_NO
		)
		REFERENCES CATE_P_SPECIES (
			CLASS_NO,
			SPECIES_NO
		);

ALTER TABLE CATE_P_SPECIES
	ADD
		CONSTRAINT FK_CT_P_CLASS_TO_CT_P_SPCS
		FOREIGN KEY (
			CLASS_NO
		)
		REFERENCES CATE_P_CLASS (
			CLASS_NO
		);

ALTER TABLE FEED
	ADD
		CONSTRAINT FK_ACCOUNT_TO_FEED
		FOREIGN KEY (
			ID
		)
		REFERENCES ACCOUNT (
			ID
		);

alter table BOARD add (BOARD_VIEW number default 0);

COMMIT;